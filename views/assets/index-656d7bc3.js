import{g as C,d as z,u as P}from"./app-b08c3635.js";import{P as S,F as v,f as D}from"./docker-6b00f3d6.js";import{_ as V,B as L,r as c,A as x,o as g,c as u,x as N,y as A,w as l,b as i,e as p,t as o,F as f,C as _,a as T}from"./index-99971903.js";const B={data(){return{list:[],page:{currentPage:1,pageSize:10,total:0},selectRow:{},dialogDetailVisible:!1,listLoading:!0}},created(){this.fetchData()},methods:{trans(){let e={};for(const a in L)e[a]&&console.log("trans.k:",a),e[a]=a;console.log("trans.zh:",e)},fetchData(){this.trans(),this.listLoading=!0,this.listQuery={},this.listQuery.currentPage=this.page.currentPage,this.listQuery.pageSize=this.page.pageSize,C(this.listQuery).then(e=>{this.list=e.data.list,this.page=e.data.page,this.listLoading=!1})},handleSizeChange(e){this.page.pageSize=e,this.fetchData()},handleCurrentChange(e){this.page.currentPage=e,this.fetchData()},delApp(e){const a={Name:e.Name};this.listLoading=!0,z(a).then(h=>{this.$message(h.msg),this.listLoading=!1})},updateApp(e){const a={Name:e.Name};this.listLoading=!0,P(a).then(h=>{this.$message(h.msg),this.listLoading=!1})},openDetail(e){this.selectRow=e,this.dialogDetailVisible=!0},PortsToStr(e){return S(e)},PortToStr(e){const a=(e.IP?e.IP:"")+(e.PublicPort?":"+e.PublicPort:"");return(a?a+" -> ":"")+e.PrivatePort+"/"+e.Type},FormatVolumes(e){return v(e)},formatSize(e){return D(e)}}},F={class:"app-container"};function I(e,a,h,Q,r,d){const s=c("el-table-column"),m=c("el-button"),w=c("el-table"),b=c("el-pagination"),y=c("el-dialog"),k=x("loading");return g(),u("div",F,[N((g(),A(w,{data:r.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},{default:l(()=>[i(s,{align:"center",label:"ID",width:"65"},{default:l(t=>[p(o(t.$index+1),1)]),_:1}),i(s,{label:"AppName",width:"170"},{default:l(t=>[i(m,{type:"primary",link:"",onClick:n=>d.openDetail(t.row)},{default:l(()=>[p(o(t.row.Name),1)]),_:2},1032,["onClick"])]),_:1}),i(s,{label:"Image",width:"270"},{default:l(t=>[p(o(t.row.Image),1)]),_:1}),i(s,{label:"MaxMemory",width:"110"},{default:l(t=>[p(o(d.formatSize(t.row.Memory)),1)]),_:1}),i(s,{label:"Ports",width:"270"},{default:l(t=>[(g(!0),u(f,null,_(t.row.Ports,n=>(g(),u("div",{key:n.key},o(d.PortToStr(n)),1))),128))]),_:1}),i(s,{label:"Volumes",style:{"min-width":"150px"}},{default:l(t=>[(g(!0),u(f,null,_(t.row.Volumes,n=>(g(),u("div",{key:n.key},o(n),1))),128))]),_:1}),i(s,{label:"Env",align:"center",width:"170"},{default:l(t=>[(g(!0),u(f,null,_(t.row.scope,n=>(g(),u("div",{key:n.key},o(n),1))),128))]),_:1}),i(s,{label:e.$t("操作"),align:"center",width:"170"},{default:l(t=>[i(m,{loading:r.listLoading,size:"small",type:"danger",link:"",onClick:n=>d.delApp(t.row)},{default:l(()=>[p(o(e.$t("删除")),1)]),_:2},1032,["loading","onClick"]),i(m,{loading:r.listLoading,size:"small",type:"primary",link:"",onClick:n=>d.updateApp(t.row)},{default:l(()=>[p(o(e.$t("更新")),1)]),_:2},1032,["loading","onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[k,r.listLoading]]),i(b,{"hide-on-single-page":!0,"current-page":r.page.currentPage,"page-sizes":[10,30,50,100,200,300,400],"page-size":r.page.pageSize,layout:"prev, pager, next, jumper, sizes, total",total:r.page.total,style:{width:"500px",margin:"0 auto","margin-top":"10px"},onSizeChange:d.handleSizeChange,onCurrentChange:d.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),i(y,{modelValue:r.dialogDetailVisible,"onUpdate:modelValue":a[0]||(a[0]=t=>r.dialogDetailVisible=t),title:"详情"},{default:l(()=>[T("pre",null,"    "+o(JSON.stringify(r.selectRow,null,2))+`
          `,1)]),_:1},8,["modelValue"])])}const j=V(B,[["render",I]]);export{j as default};
